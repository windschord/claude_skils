---
name: sdd-docs
description: ソフトウェア設計ドキュメント（SDD）を作成・管理します。3つの主要ファイル - requirements.md（EARS記法によるユーザーストーリー）、design.md（技術アーキテクチャ）、tasks.md（実装計画）を管理します。構造化されたソフトウェアドキュメント作成、EARS記法での要件定義、技術仕様のdocsディレクトリ設定が必要な場合に使用してください。
---

# SDD ドキュメンテーションスキル

構造化されたソフトウェア設計ドキュメント（SDD）の作成を支援します。明確な要件定義、設計思想、実行可能なタスクを重視したドキュメント作成手法です。

## 概要

SDD-Docsスキルは、以下の3つの必須ドキュメントファイルの作成と管理を支援します：
- **requirements.md**: EARS記法を用いたユーザーストーリーと受入基準
- **design.md**: 技術アーキテクチャ、コンポーネント、実装詳細
- **tasks.md**: 追跡可能な個別タスクへの作業分解

すべてのドキュメントは`docs`ディレクトリに保存され、可視性とGit管理が容易になります。

## このスキルを使用する場面

以下の状況でこのスキルを有効にしてください：
- 新規ソフトウェアプロジェクトで構造化されたドキュメントが必要な場合
- 明確でテスト可能な受入基準を持つ要件を作成する場合
- 技術アーキテクチャと設計決定を文書化する場合
- 機能を実装可能なタスクに分解する場合
- 要件がEARS記法の標準に従っているか検証する場合
- プロジェクトのドキュメント構造を設定する場合

## ドキュメント初期化の方法

「docsディレクトリを初期化してください」や「SDDドキュメントを作成してください」と依頼されたら、以下の作業を行います：

1. **docsディレクトリの作成**
2. **requirements.md（要件定義書）の作成** - assets/templates/requirements_template_ja.mdを基に作成
3. **design.md（設計書）の作成** - assets/templates/design_template_ja.mdを基に作成
4. **tasks.md（タスク管理書）の作成** - assets/templates/tasks_template_ja.mdを基に作成

作成時は、プロジェクトの内容に応じてテンプレートをカスタマイズします。

## EARS記法ガイド

EARS（Easy Approach to Requirements Syntax）により、要件を明確で曖昧さがなく、テスト可能にします。

### 基本パターン（日本語版）

| パターン | 形式 | 使用場面 |
|---------|------|----------|
| 基本 | `システムは〜しなければならない` | 常時適用される要件 |
| イベント | `〜の時、システムは〜しなければならない` | イベント駆動要件 |
| 条件 | `もし〜ならば、システムは〜しなければならない` | 状態依存要件 |
| 継続 | `〜の間、システムは〜しなければならない` | 継続的要件 |
| 場所 | `〜において、システムは〜しなければならない` | コンテキスト固有要件 |

### 要件の例

```markdown
- REQ-001: ユーザーが「カートに追加」をクリックした時、システムは500ms以内に商品を追加しなければならない
- REQ-002: カートが空の場合、システムは「カートは空です」と表示しなければならない
- REQ-003: 決済処理中、システムは進捗インジケーターを表示しなければならない
- REQ-004: ユーザーがEU地域にいる場合、システムはGDPR同意オプションを表示しなければならない
- NFR-001: システムは性能劣化なしに1000人の同時ユーザーを処理できなければならない
```

詳細なEARSガイダンスは `references/ears_notation_ja.md` を参照してください。

## ドキュメント構造の説明

### requirements.md（要件定義書）

```markdown
# 要件定義

## 概要
[機能/システムの高レベルの目的と目標を記載]

## ユーザーストーリー
### ストーリー1: [タイトル]
**私は** [ユーザータイプ]として
**〜したい** [目標]
**なぜなら** [価値/利点]

#### 受入基準（EARS記法）
- REQ-001: [イベント]の時、システムは[振る舞い]しなければならない
- REQ-002: もし[条件]ならば、システムは[振る舞い]しなければならない

## 非機能要件
- NFR-001: システムは[性能/セキュリティ/ユーザビリティ要件]を満たさなければならない
```

### design.md（設計書）

```markdown
# 設計

## アーキテクチャ概要
[システムアーキテクチャの説明と図]

## コンポーネント
### コンポーネント1: [名前]
**目的**: [機能]
**責務**: [リスト]
**インターフェース**: [API/メソッド]

## データフロー
[シーケンス図とデータフローの説明]

## 技術的決定事項
[主要な技術選択と根拠]
```

### tasks.md（タスク管理書）

```markdown
# タスク

## 実装計画

### フェーズ1: [名前]
#### タスク1.1: [タイトル]
**説明**: [実施内容]
**受入基準**: [チェックリスト]
**依存関係**: [他のタスク]
**ステータス**: `TODO`
```

## ワークフロー

1. **初期化**: docsディレクトリとテンプレートファイルを作成
2. **要件定義**: EARS記法を使って何を作るかを定義
3. **設計**: どのように作るかを文書化
4. **タスク計画**: 実装を計画
5. **レビュー**: ドキュメントの品質をチェック
6. **反復**: プロジェクトの進展に応じて更新

## 検証チェックリスト

ドキュメントをレビューする際は以下を確認：

### 要件定義書のチェック項目
- ✅ ユーザーストーリーが明確に定義されている
- ✅ すべての要件がEARS記法に従っている
- ✅ 要件IDが一意である（REQ-XXX、NFR-XXX）
- ✅ 各要件がテスト可能である
- ✅ 非機能要件が含まれている

### 設計書のチェック項目
- ✅ アーキテクチャ概要が記載されている
- ✅ 主要コンポーネントが定義されている
- ✅ インターフェースが明確である
- ✅ 技術的決定事項と根拠が記載されている
- ✅ 必要に応じて図表が含まれている

### タスク管理書のチェック項目
- ✅ タスクが適切な粒度に分解されている
- ✅ 各タスクに受入基準がある
- ✅ 依存関係が明確である
- ✅ 見積もり時間が記載されている
- ✅ ステータスが有効な値である（TODO、IN_PROGRESS、BLOCKED、REVIEW、DONE）

## ベストプラクティス

1. **なぜから始める**: 目的を理解するためユーザーストーリーから開始
2. **具体的に**: 測定可能な値を使用（「高速」ではなく「2秒以内」）
3. **要件ごとに1つ**: 複合要件を避ける（複数の「しなければならない」を含めない）
4. **すべてをテスト可能に**: 各要件は検証可能でなければならない
5. **依存関係を追跡**: 関連タスクを明確にリンク
6. **最新を保つ**: 作業の進行に応じてステータスを更新

## ユーザーとの対話ガイドライン

**【重要】推測を避け、必ずユーザーに確認する**

このスキルを使用する際は、以下の原則に従ってユーザーとコミュニケーションを取ってください：

### 1. 推測禁止の原則
- プロジェクトの詳細、技術スタック、要件などについて推測しない
- 不明確な点や曖昧な情報がある場合は、必ずユーザーに確認する
- 仮定を立てる必要がある場合は、その仮定を明示してユーザーに確認を求める

### 2. 選択肢を提示する
ユーザーに確認を求める際は、以下のような形式で選択肢を提示してください：

**良い例**：
```
プロジェクトの種類について確認させてください：
A) Webアプリケーション
B) モバイルアプリケーション
C) API/バックエンドサービス
D) その他

どれに該当しますか？
```

**良い例（Yes/No形式）**：
```
このプロジェクトはWebアプリケーションですか？
- はい
- いいえ
```

**悪い例**：
```
Webアプリケーションとして進めます。
```

### 3. AskUserQuestionツールの活用
複数の選択肢がある場合や、重要な決定が必要な場合は、AskUserQuestionツールを積極的に使用してください。

**使用例**：
- プロジェクトタイプの選択
- 技術スタックの確認
- アーキテクチャパターンの選択
- 非機能要件の優先順位付け
- タスクの粒度や見積もりの確認

### 4. 確認が必要な場面

以下の場合は必ずユーザーに確認してください：

#### ドキュメント初期化時
- プロジェクトの種類や目的
- 対象ユーザー
- 主要な機能
- 技術的制約

#### 要件定義時
- ユーザーストーリーの優先順位
- 非機能要件の具体的な値（性能、セキュリティなど）
- 受入基準の妥当性

#### 設計時
- アーキテクチャパターンの選択
- 技術スタックの選定
- データモデルの構造
- 外部サービスとの連携方法

#### タスク分解時
- タスクの粒度
- 優先順位
- 見積もり時間
- 実装の順序

### 5. 確認の形式

**推奨される確認パターン**：

1. **二択の確認**
   ```
   〜という理解で正しいですか？
   - はい
   - いいえ
   ```

2. **複数選択**
   ```
   以下のうち、どれに該当しますか？
   A) 選択肢1
   B) 選択肢2
   C) 選択肢3
   D) その他（詳しく教えてください）
   ```

3. **段階的な確認**
   ```
   まず、〜ですか？
   - はい → 次の質問へ
   - いいえ → 別の質問へ
   ```

### 6. 避けるべき表現

以下のような推測に基づく表現は避けてください：

❌ 「おそらく〜でしょう」
❌ 「一般的には〜です」
❌ 「〜と仮定して進めます」
❌ 「〜のようですので」

✅ 「〜でしょうか？確認させてください」
✅ 「以下の選択肢から選んでいただけますか？」
✅ 「〜という理解で正しいですか？」

## リソース

### assets/templates/
- `requirements_template_ja.md`: 日本語の要件定義テンプレート
- `design_template_ja.md`: 日本語の設計テンプレート
- `tasks_template_ja.md`: 日本語のタスクテンプレート

### references/
- `ears_notation_ja.md`: EARS記法の完全な日本語リファレンス
- `examples_ja.md`: 3つすべてのドキュメントタイプの日本語例

## 具体的な支援内容

このスキルが有効な場合、以下のような支援を提供します：

### 1. ドキュメント初期化
プロジェクトに応じたカスタマイズされたテンプレートでdocsディレクトリを作成します。

### 2. 要件定義の支援
- ユーザーストーリーの作成を支援
- EARS記法に従った要件の記述をガイド
- 要件の曖昧さや不完全性を指摘

### 3. 設計文書の作成
- アーキテクチャ図の作成支援（Mermaid形式）
- コンポーネント設計のテンプレート提供
- 技術的決定事項の文書化支援

### 4. タスク分解
- 機能を実装可能なタスクに分解
- 依存関係の明確化
- 適切な見積もりのガイダンス

### 5. レビューと改善
- EARS記法への準拠をチェック
- ドキュメントの完全性を確認
- 改善点の提案

## 拡張可能性

このスキルは将来の機能拡張を考慮して設計されています：

- **進捗管理**: タスクステータスの可視化とレポート生成
- **自動検証**: EARS記法の自動チェックツール
- **統合機能**: GitHub Issues、Jiraなどとの連携
- **多言語対応**: 英語版テンプレートの追加
- **カスタムテンプレート**: プロジェクトタイプ別のテンプレート

## よくある質問

**Q: なぜdocsディレクトリを使うのですか？**
A: `docs`ディレクトリは一般的で、Gitで管理しやすく、他のツールとの互換性が高いためです。

**Q: EARS記法は必須ですか？**
A: 推奨されますが、プロジェクトのニーズに応じて調整可能です。ただし、EARS記法を使用することで要件の明確性が大幅に向上します。

**Q: タスクのステータスはどのように管理しますか？**
A: マークダウンファイル内で直接更新します。将来的には自動化ツールの追加も検討しています。

**Q: このドキュメント形式の利点は何ですか？**
A: 要件・設計・タスクの3つのドキュメントに分けることで、「何を作るか」「どう作るか」「どのように実装するか」が明確に分離され、プロジェクトの見通しが良くなります。