# トラブルシューティング

このドキュメントは、運用設計スキル使用時のよくある問題と解決方法を記載しています。

**対象読者**: ユーザー（人間）、Claude Code（AI）

**目的**: 問題発生時の対処方法を提供する

---

## トラブルシューティング

### よくある問題と解決方法

#### 問題1: 業界トレンド調査が空振りする

**症状**:
```
WebSearchで業界トレンドを検索したが、関連する情報が見つからない
```

**原因**:
- 検索キーワードが具体的すぎる
- ニッチな業界で公開情報が少ない

**解決方法**:
1. より広い検索キーワードで再検索
   ```
   例: 「製造業 DX 運用設計」→「製造業 IT運用 ベストプラクティス」
   ```
2. 類似業界のトレンドを参考にする
   ```
   例: 特定業種が見つからない場合、「一般的なSaaS運用」等で検索
   ```
3. ITIL 4/SRE/DevOpsの一般的なベストプラクティスを適用

#### 問題2: ユーザーが運用要件を決められない

**症状**:
```
ユーザー: 可用性目標はどうすればいいですか？
```

**原因**:
- 運用設計の知識が不足している
- ビジネス要件が不明確

**解決方法**:
1. 業界標準を提示して選択を促す
   ```
   AI: 貴社のサービスと類似する[業界名]では、
       一般的に99.9%〜99.95%の可用性目標が設定されています。

       参考までに:
       - 99.9% = 月間ダウンタイム約43分
       - 99.95% = 月間ダウンタイム約22分
       - 99.99% = 月間ダウンタイム約4分

       ビジネスへの影響を考慮して、どのレベルが適切でしょうか？
   ```

2. ビジネス影響から逆算
   ```
   AI: サービスが停止した場合のビジネス影響を教えてください：
       - 1時間停止した場合の売上損失は？
       - ユーザーへの影響は？
       - ブランドイメージへの影響は？

       これらを基に適切なSLOを提案します
   ```

#### 問題3: セクション作成で推論が含まれてしまう

**症状**:
```
ヒアリングしていない情報を勝手に設計書に書いてしまう
```

**原因**:
- 情報が不足しているのに作業を進めた
- ユーザーの回答を拡大解釈した

**解決方法**:
1. 不明な点は必ず質問する
   ```
   悪い例: 「Webサービスなので24時間運用とします」
   良い例: 「サービス提供時間について確認させてください。
           24時間365日 / 平日のみ / 営業時間のみ のどれでしょうか？」
   ```

2. ユーザーの回答をそのまま使用
   ```
   ユーザー: 「できるだけ高い可用性で」
   悪い例: → 99.99%で設計
   良い例: → 「具体的な数値目標を教えてください。
              99.9% / 99.95% / 99.99% のいずれでしょうか？」
   ```

#### 問題4: 一貫性チェックで矛盾が多数検出される

**症状**:
```
一貫性チェックで5件以上の矛盾が検出された
```

**原因**:
- セクション作成時の確認が不十分
- 後のセクションで前のセクションと矛盾する情報をヒアリングした

**解決方法**:
1. 矛盾を自動修正（Step 4の通り）
   ```
   AI: 以下の矛盾を検出し、自動修正しました:
       1. SLO 99.9%とインシデント対応時間15分が矛盾
          → 対応時間を30分に調整
       2. 24/365サービスと平日のみ運用体制が矛盾
          → オンコール体制を追加
   ```

2. 前のセクションに戻って整合性を確認
   ```
   AI: セクション10を作成する際、セクション3のSLO定義と
       矛盾する可能性があります。

       セクション3のSLO: 可用性99.9%
       セクション10の提案: 月次リリース（メンテナンス時間考慮が必要）

       メンテナンスウィンドウを考慮してSLOを調整しますか？
   ```

#### 問題5: テンプレートファイルが読み込めない

**症状**:
```
Error: Cannot read template file
```

**原因**:
- テンプレートファイルのパスが間違っている
- インフラパターンの選択が適切でない

**解決方法**:
1. 正しいパスを使用
   ```
   正しい: operations-design/assets/templates/operations_design_template_cloud_native_ja.md
   間違い: assets/templates/operations_design_template_cloud_native_ja.md
   ```

2. Readツールでファイルの存在を確認
   ```
   Readツールで以下のパスを確認:
   - operations-design/assets/templates/operations_design_template_cloud_native_ja.md
   - operations-design/assets/templates/operations_design_template_cloud_instance_ja.md
   - operations-design/assets/templates/operations_design_template_onpremise_ja.md
   ```

