# 会話ログ管理ガイド

**【重要】すべてのユーザーとの会話は会話ログファイルに記録すること**

運用設計のコンサルティング過程で収集したすべての情報をファイルに記録し、コンテキストを失わないようにします。

## 会話ログの目的

1. **コンテキストの保持**
   - ヒアリング内容を確実に記録
   - 過去の会話内容をいつでも参照可能
   - 長期間のセッションでも情報を失わない

2. **決定事項の追跡**
   - ユーザーの選択と判断を記録
   - 決定の理由と背景を保持
   - 設計の根拠を明確化

3. **未確認事項の管理**
   - 保留事項の追跡
   - 後で確認すべき項目の管理
   - 情報不足箇所の可視化

## 会話ログファイルの作成と管理

**ファイル名**: `[YYYY-MM-DD]-[サービス名]-conversation-log.md`

**保存場所**: 運用設計書と同じディレクトリ

**初期化タイミング**: 運用設計セッション開始時（業界トレンド調査の前）

**初期化手順**:

```
1. セッション開始時にWriteツールを使用して会話ログファイルを作成
2. assets/templates/conversation_log_template_ja.md をテンプレートとして使用
3. セッション情報（開始日時、対象サービス等）を記入
4. ユーザーに会話ログファイルの作成を通知
```

**初期化の例**:

```
コンサルタント: 運用設計セッションを開始します。

                まず、会話ログファイルを作成しました：
                `2025-11-17-ECサイト-conversation-log.md`

                このファイルに、これからのすべての会話内容、収集した情報、
                決定事項を記録していきます。

                それでは、業界トレンド調査から開始させてください。
```

## 会話ログの記録タイミング

**以下のタイミングで必ず会話ログを更新すること**:

1. **業界トレンド調査後**
   - 調査した内容をログに記録
   - 主要なトレンドと調査結果を記載

2. **各ヒアリング質問の後**
   - 質問内容と回答を記録
   - 重要なポイントや決定事項を記載
   - 次のアクションを記録

3. **各セクション完成後**
   - セクション内容の承認状況を記録
   - 修正要求や追加要望を記載

4. **一貫性チェック後**
   - 発見した矛盾点を記録
   - ユーザーの判断と対応を記載

5. **セッション終了時**
   - 最終的な決定事項をまとめる
   - 未確認事項・保留事項を整理
   - 次のステップを記録

## 会話ログの更新方法

**Editツールを使用して更新する**:

```
1. 会話が発生したら、その内容を整理
2. Editツールで会話ログファイルの該当セクションを更新
3. タイムスタンプと内容を追加
4. 重要なポイント、決定事項、次のアクションを記録
```

**更新の例**:

```markdown
### [14:30] 可用性要件の確認

**コンサルタント**:
```
可用性目標について確認させてください：

A) 99.9%（月間ダウンタイム約43分） ⭐⭐⭐⭐
B) 99.95%（月間ダウンタイム約22分） ⭐⭐⭐⭐⭐
C) 99.99%（月間ダウンタイム約4分） ⭐⭐

どれを選択しますか？
```

**ユーザー回答**:
```
B) 99.95%を選択します。決済機能があるため、
より高い可用性が必要だと考えています。
```

**記録事項**:
- 可用性目標: 99.95%に決定
- 理由: 決済機能を含むため、高い可用性が必要
- 次のアクション: SLO設定に99.95%を反映
```

## 会話ログのサマリー更新

**セッション中、定期的にサマリーセクションを更新する**:

```markdown
## 収集した情報のサマリー

### サービス基本情報
- サービス名: ECショッピングサイト
- 目的: オンラインでの商品販売
- 対象ユーザー: 一般消費者（B2C）
- 想定ユーザー数: 月間10万人

### システム構成
- アーキテクチャ: マイクロサービス
- 技術スタック:
  - フロントエンド: React
  - バックエンド: Node.js
  - データベース: PostgreSQL
  - インフラ: AWS

### 運用要件
- 可用性目標: 99.95%
- サービス提供時間: 24/365
- パフォーマンス要件: P95レスポンス < 500ms
- セキュリティ要件: PCI DSS準拠

### 決定事項
1. 可用性目標を99.95%に設定
2. 24時間365日のオンコール体制を構築
3. AWS Auto Scalingを使用したスケーリング戦略

### 未確認事項・保留事項
1. バックアップのRPO目標: 後日確認
2. 災害対策のRTO目標: 次回セッションで決定
```

## 会話ログの活用

**設計書作成時の参照**:
- 会話ログの情報を基に運用設計書を作成
- 決定事項の根拠として会話ログを参照
- 不明点が出た場合は会話ログで過去の議論を確認

**一貫性チェック時の参照**:
- 会話ログの決定事項と設計書の整合性を確認
- 矛盾がある場合は会話ログで経緯を確認
- ユーザーに再確認が必要な場合は過去の議論を提示
