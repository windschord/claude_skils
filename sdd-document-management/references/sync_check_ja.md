# 実装同期チェック詳細ガイド

## チェック観点

### 1. API同期

| チェック項目 | 比較対象 |
|-------------|---------|
| エンドポイント | docs/design/api/*.md vs 実装コード |
| リクエスト/レスポンス | ドキュメント定義 vs 実際の型定義 |
| HTTPメソッド | ドキュメント vs ルーティング |

### 2. データベース同期

| チェック項目 | 比較対象 |
|-------------|---------|
| テーブル定義 | docs/design/database/*.md vs マイグレーション/スキーマ |
| カラム定義 | ドキュメント vs 実際のスキーマ |
| リレーション | ドキュメント vs 実際の外部キー |

### 3. コンポーネント同期

| チェック項目 | 比較対象 |
|-------------|---------|
| インターフェース | docs/design/components/*.md vs 実装 |
| 公開メソッド | ドキュメント vs 実際のエクスポート |
| 依存関係 | ドキュメント vs import文 |

## 乖離の分類

| 分類 | 説明 | 推奨アクション |
|-----|------|---------------|
| ドキュメント古い | 実装が先に変更された | ドキュメントを更新 |
| 実装漏れ | ドキュメントにあるが実装がない | 実装を追加 or ドキュメントを削除 |
| 未文書化 | 実装にあるがドキュメントがない | ドキュメントを追加 or 実装を削除 |

## 実行手順

```text
1. docs/design/api/ のAPI定義を抽出
2. 実装コードからルーティング・コントローラーを検出
3. 定義と実装を比較し乖離を検出
4. 同様にDB、コンポーネントもチェック
5. 乖離レポートを作成
6. ★ ユーザーに提示し承認を得る ★
7. 承認された更新を実行
```

## ユーザー承認フロー

```text
実装同期チェックが完了しました。

【検出された乖離】
- API: X件
- データベース: X件
- コンポーネント: X件

対応を選択してください：

A) ドキュメントを実装に合わせて更新
B) 実装をドキュメントに合わせて修正（タスク作成）
C) 個別に対応を選択
D) 今回は修正せずレポートのみ保存
```

## レポートテンプレート

`assets/templates/sync_report_template_ja.md` を参照。
